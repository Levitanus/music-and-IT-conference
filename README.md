# нас ждёт большая работа на стыке музыки и IT

## вступление
### коротко о структуре доклада
### о передовых проектах музыкантов и IT-шников
### Content-ID как квинтессенция кросс-дисциплинарной задачи [тезисно]
**со стороны IT**:

    * организация базы данных
    * пердставления произведений и записей в ней
    * поиска
    * движка для анализа —> перетекаем к музыкантам

**муызканты**:

    * формулирование критериев (не юридических, а именно разметка данных)
    * совместная работа над интерфейсом
    * теория для анализа, совместная работа с инженерами

И эту всю кухню мы в ближайшие много лет просто не узнаем.

### успешные кейсы в России и потенциальные возможности для работы

— как пример успешной кросс-дисциплинарной работы — поиск Яндекса, и кооперация с филологами. Яндекс получил поиск, а филологи — корпус русского языка (попробую уточнить у С. Бурлак историю подробнее, слышал в её лекции)
— «наука для всех» и возможность работы с большими данными, или с решение задач большим числом волонтёров в интерактивной форме
— [TODO]

## о сэмплированных виртуальных инструментах

Я собираюсь говорить о «виртуальных инструментах на основе сэмплирования». Звучит сложно, и часто встаёшь в тупик, пытаясь объяснить людям, что это такое и зачем нужно. Сегодня попробую описать то, чем мы занимаемся с помощью достаточно бородатого, но всё-таки достаточно точного анекдота:

### анекдот, две стороны задачи

Пианист заключает контракт с лейблом на запись всех рапсодий Листа. Приходит в назначенный час на студию, там продюсер, звукорежиссёр, ставят микрофоны настраивают звук. Продюсер говорит: ну ты пока поиграй, а мы пойдём чайку попьём. И пианист разыгрывается: гаммы, арпеджио, репетиции, всё в прямом, расходящемся и т.п. Устал, выглядывает в операторскую, навстречу продюсер:
— ну молодец, приятно было поработать!
— Так я ж только разыгрался?
— Ну и отлично! А дальше мы нарежем.

Ситуация абсурдная, но мы работаем над тем, чтобы она стала реальной. Если представить, что это не анекдот, а реальная история, то у нас возникнут два закономерных вопроса:
— что такого там наиграл пианист, что из этого можно было нарезать все рапсодии Листа?
— как так хитро там всё нарезали звукорежиссёр с продюсером, что им это оказалось легче, чем писать вживую?

Не могу сказать, что это очень молодая сфера деятельности. Можно брать разные точки отсчёта, но, пожалуй, ближе к концу 90-х сэмплы уже всерьёз пытались выполнять работу живых музыкантов.

### сфера применения, прогресс за последнее десятилетие

Для чего это всё нужно? Ну, во-первых, это интересно. Во-вторых, мы таким образом серьёзно расшияем инструментарий сразу в нескольких областях:
— Образование. Сложно переоценить, как ценно услышать свой оркестровый опус в более или менее приближенном исполнении, и как трудно донести свои сочинения до живого оркестра, даже будучи студентом ВУЗа.
— малобюджетные проекты, которым нужна оригинальная музыка. Во многом, конечно, именно эта область стала катализатором для развития.
— с другой стороны, высокобюджетные фильмы и музыкальные проекты не чураются сэмплов как дополнительных красок, средства для замазывания огрехов записи и уплотнения звука.

## современное поколение

Скажу пару слов о том, как сделаны большая часть оркестров, что мы используем сейчас, а потом немного расскажу о следующих поколениях, которые будут с нами в 20-х годах.

### пример с хлопками

Вообще, если бы у нас было два академических часа, я бы первый полностью отвёл на то, чтобы познакомить с самыми базовыми принципами сэмплирования инструментов, и получить на выходе что-то готовое. Но давайте попробуем сделать «монтаж».

Итак, мне нужно всегда под рукой иметь реалистичную удобную боди-перкуссию: хлопки, щелчки, топот. Какие мои действия? [работа с залом], [записать хлопок, отрезать, запихнуть в программу (сэмплер)]

— Если мы запишем один хлопок, один щелчёк, один топот, то у нас получится так называемый пулемёт [пример?]

— А если я хочу хлопать и громко и тихо? Давайте все хлопнем один раз громко, другой — тихо. Слышите разницу в тембре?

— теперь вопрос вот в чём: мы хлопаем то невпопад, то вместе. А как мне надо будет в работе? [по-разному]. Значит, с одной стороы, надо придумать, как заставить вас хлопать невместе и «вместе». И то, как сделать так, чтобы я мог при игре этими хлопками точно выбирать какой вариант мне нужен.

— ну и после всего этого остаётся последний вопрос: сколько это всё займёт ресурсов в компьютере? На этот вопрос современная индустрия как правило отвечает — столько, сколько необходимо. Мы уже пережили и рояли на 200ГБ, и сольную трубу на сотню тысяч сэмплов. Однако, об этом расскажу позднее, ресурсы всё равно конечны, и все разработчики так или иначе оглядываются на рантайм на средней руки рабочей станции.

### пример с роялем

Хорошо, с хлопками [TODO]

#### случай с непрозвучавшей нотой на записи
### почему не звучит: плохой интерфейс или плохой движок?
### фиксация проблем поколения [тезисно]
— стерильность
— обезличенность
— неудобство и отсутствие стандартов интерфейса
— музыкантам дико некомфортно

## молодое поколение [тезисно]
— последние 3-5 лет
— основные разработчики: musical sampling, performance samples, orchestral tools
— два основных направления: «инструменты одной задачи», запись крупных и совмещённых секций для большего ощущения «ансамбля».
### подход сэмплы-произведение
— музыкантам привычнее
— резать сложнее
— более живой результат
— характерность и неуниверсальность
### проблема ресурсов и открытости данных
— всё слишком коммерческое: ни статей ни открытых методик
— каждый изобретает велосипед заново за счёт потребителя
— сделать всё и сразу — задача, за которую не берутсядаже гиганты, в том числе и потому что уже сделали по 1-2 оркестру «прошлого» поколения
### нерешённые проблемы поколения
— неуниверсальность
— плохая совместимость друг с другом
— высокая стоимость производства
— переходы в реальном времени всё равно накладывают ограничения, всё время звучат несколько сэмплов одновременно

## что дальше? [тезисно]
— идеи витают в воздухе и это во многом моя личная точка зрения на то, как всё должно развиваться дальше. Я как разработчик пропустил работу по технологиям «молодого поколения» и, не смотря на то, что от экспериментов никуда не деться, всё же надеюсь следующие проекты уже начать делать в этой парадигме, мне она кажется более перспективной, чем пытаться что-то выжать из текущей инфраструктуры.
### детализация за счёт увеличения производительности и объёма
— Нельзя продолжать работать в реальном времени: результат будет и дальше получаться как в компьютерных играх. Визуальные эффекты же рендерят по несколько часов один кадр? почему и нам не пойти этим путём?
### оффлайн-сэмплер
преимущества:
— точная подгонка всех склеек меджу сэмплами
— всегда остаётся один сэмпл
— меняется парадигма записи. Нас теперь не интересует, как оно будет с=звучать одновременно, нас интересует, насколько точно мы можем подобрать сэмпл под то, что сыграл исполнитель
— возможность применения статистического или ещё какого, может и нейросетью выбора сэмпла под ситуацию
### запись оркестра как барабанной установки
— мы уже научились записывать много барабанов как один живой инстурмент Орестр — тот же случай
— Получается, для того, чтобы все группы артикулировали «схоже», в одной исполнительской парадигме, надо, чтобы они реально играли в ансамбле.
— А записывать микрофонами прямо всеми, чтобы первые скрипки были в микрофонах у литавр
### 24 прелюдии и фантазии для сэмплируемого оркестра
таким образом, это ставит перед нами ряд невероятно амбициозных задач:
#### Со стороны «записи»
    — сформулировать некий тезаурус исполнительских приёмов
    — написать такое оркестровое произведение, которое включит их все для каждой группы и на большинстве нот в диапазоне
    — выучить его с оркестром, записать сразу всем
    — потом записать по группам
    — разумеется, вся эта работа невозможна снахрапу, тут есть почва для кучи небольших проектов, каждый из которых бы решал одну конкретную задачу
#### Со стороны «интерфейса»
    — придумать, как этим всем управлять так, чтобы, с одной стороны возможен был исполнительский рост (осваивание техник исполнения), а с другой, была некоторая универсальность исполнения разными видами инструментов.
    — Пофантазировать на тему больших данных и вообще сколько сможет работы на себя взять компьютер через 10-15 лет
### проблемы следующего поколения
— всё-таки, ограниченность исполнительских техник и выражаемых эмоций теми, что были спроектированы. Это как монтировать картинки в фотошопе, а не моделировать их в 3D. Да, долгое время 3D визуализации уступали футажам и коллажам, но сейчас уже реалистичнее, как правило, всё нарисовать в векторе. То же характерно и для виртуальных инстурментов: когда-нибудь сэмплы канут в лету, но на ближайшие 10-20 лет их точно хватит: пока мы не решим ряд крупных проблем, ограничивающих оркестровое применение инструментов на основе физического моделирования.

## история успеха

Конечно, если хочешь вдохновить кого-то на большую работу, хорошо бы иметь на руках историю успеха. И, к счастью, она у меня есть.

### студенческий проект и результат на текущий момент

6 лет тому назад, пришлось мне сделать вынужденную посадку в Сахаре... [муз пример]
Не совсем: я задумал сделать виртуальный оркестр русских народных инструментов. По тем временам для России проект уникальный, так как у нас в стране разработчиков было по пальцам сосчитать, а с оркестрами не работал вообще никто. Сейчас, несмотря на большой срок, это до сих пор единственный вменяемый оркестр, сделанный (ну ещё не до конца) в России. Хотя некоторые ребята уже, как минимум, собирают большие составы и записываю с ними разные текстуры.

Вот так эти инструменты сейчас звучат без всех остальных: мы это называем «голые». [муз. пример]

### что удалось, чем пришлось пожертвовать

Бюджет у нас был, прямо скажем, тика-в-тику, даже по тем временам: ребятам я платил 500₽ в час, Юрий Иосифович Исаков тоже с нами был за номинальные деньги. Так что набор сэмплов получился максимально скромным: я держал ориеннтир на, достаточно старую даже по тем временам библиотеку струнных LASS. Старую, но тем не менее, уважаемую.

Так что по штрихам и исполнительским возможностям получилось сделать оркестр уровня «создать впечатление оркестрового звука», но без кучи исполнительских приёмов, вроде флажолет или зипков пальцами у домр. Тем не менее, всё, что мы записали, с точки зрения исполнения — записали крайне удачно. Всего получается 4 артикуляции на инструменнт (если не считать аккорды у группы балалаек), которые, за счёт сухого звука достаточно мобильны и замечтаельно обрабатываются в реальном времени.

К сожалению, за исключением трёх сессий (двух групп малых домр и балалаек-прим), у нас были ужасные условия для записи: писали что как: что-то в 418-419м, [TODO]

[какие-то слова о том, что за 150К ₽ и силами второкурсников получается делать что-то достойное]

### побочные продукты производства

Вообще, когда делаешь что-то в одиночку без свободного времени и средств на негров, пытаешься заниматься оптимизацией везде где только можно.

Поскольку, надо мной не стоял ни научрук с зачёткой, ни инвестор с паяльником, я себе позволил потратить времени на «оптимизацию» больше, чем на сам проект. Неоднократно попытка немного облегчить себе жизнь выливалась в какой-то pet-проект. Так я написал компилятор, позволяющий писать на полноценном python так, чтобы в итоге получать скрипты на языке популярного сэмплера KONTAKT; внёс большой вклад и продолжаю контрибьютить в библиотеку reapy, радикально облегчающую написание скриптов для рабочей станции Reaper; было несколько разной степени удачливости попыток написания комбайна для нарезки сэмплов, последняя попытка была этой зимой под новый год, и я ей в целом очень доволен.

И всё это так или иначе наполняет мир открытого софта новыми инструментами, которые созданы так или иначе в рамках работы над «основным» проектом.

### рост индустрии за время жизни проекта

Напоследок хотел бы отметить насколько наша индустрия повзрослела за те шесть лет, что я занимаюсь этими народными. У нас появились новые чудесные инструменты стандартизации исполнительского интерфейса: мы их называем expression maps, не смотря на то, что это имя собственное, примерно такое же как Xerox. Наши сэмплеры обрасли новыми возможностями, в том числе получили развития инструменты MIR — Music information retrieval. За этим красивым термином, правда, скрываются в том числе и такие всем известные инструменты из мира DSP и статисики как среднеквадратичный уровень, преобразование фурье, магнитуды, сила, корреляции и вероятности и т.п. Но всё-таки упор идёт на анализ формы, стиля, характеристик звука таких как тембр, баланс ударности и мелодичности и т.п.

Появился, наконец, свободный полноценный сэмплер с уровнем входа не выше, чем KONTAKT! Так что я всех, кто как-то этим занимается агитирую переходить на HISE.

## заключение

Я очень надеюсь, что у кого-то из вас появились новые идеи относитель междисциплинарной работы, или вы вдохновились попробовать сделать что-то более или менее большое в области пересечения с IT. Ещё больше надеюсь, что кто-то вдохновился всей нашей оркестровой кухней, и впряжётся в нашу работу. Конечно, всегда есть желание что-то сделать первым, но на самом деле, не меньше радости испытываешь, когда большое сообщество работает над решением твоих повседневных рабочих проблем, и, более того, решает их. И очень я надеюсь, что в нашем мире всё больше будет открытой информации и свободного софта. И, конечно, хочется быть на острие прогресса, и я надеюсь, что и я сам ещё внесу свой вклад в развитие нашей индустрии. Спасибо за внимание.

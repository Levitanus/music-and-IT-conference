# Искра вдохновения на большую междисциплинарную работу It-шников и музыкантов

Как я и написал в теме своего доклада, я буду считать своё выступление успешным, если в процессе хотя бы у кого-нибудь из присутствующих вдруг загорятся глаза и возникнет желание написать своему знакомому IT-шнику: «друг, нужна твоя помощь, мне надо обработать данные!», или «дорогие студенты НГУ, никто не хочет свою курсовую посвятить автоматизации моей очень важной и нудной задачи?», или «Дорогой декан имярек имярекович, нет ли у вас в программе проектной работы? Нам бы приложение для того, чтобы волонтёры размечали в нём все редакции сонат Бетховена».

И у меня к вам большая просьба: если у вас такое желание возникнет — не откладывайте, пожалуйста это дело на завтра, на следующую неделю, даже на вечер: будет пересменка перед музыкальной частью, или можно параллельно с моим выступлением подумать, какие специалисты вам нужны для проекта — и писать им, заражать своей идеей. Именно так и делаются большие и успешные проекты: сразу и на энтузиазме, пока никто не успел испугаться и отказаться. Вообще, буквально пару недель назад меня точно также разбудила Надя Скворцова, которая в москве ведёт музыкальную терапию — «Друг, надо приложение, чтобы на электронном пианине ноту нажимаешь — а эта нота показывалась на весь экран ноутбука, к которому эта пианина подключена. И чтобы ничего кроме.». Вот так вот спросонья я подписался на то, чтобы написать приложуху, сейчас все концерты-доклады пройдут — и напишу))

Итак, что же это за «большая междисциплинарная работа»? У любого музыканта, который занимается научной деятельностью или просто копается в какой-то области так или иначе уже есть несколько тем, которые он хочет и собирается разрабатывать: кому-то интересны текстологические поиски, кто-то ищет опорные точки для интерпретации произведения, над которым работает: это всё давным давно известно. Однако, чем бы мы не занимались, периодически у нас возникают трасцендентные вопросы, такие, о которых страшно и задумываться, не понятно с какой стороны форулировать к ним задачи, а если они и формулируются, то глядя на объём работ — мы понимаем, что не это не хватит и жизни.

Допустим:

![видео с корейской девочкой](Violin_Progress_Video_2.mp4)

Вот — что это такое? Нет, конечно, можно, как мы привыкли, сказать: «да, случается, Моцарт тоже так умел», и закрыть на этом вопрос. Но всё-таки, можем ли мы спросить себя: «что это»? Это гены? Это система? Это среда? Музыка для беременных? Что это? У меня дочка неплохо играет на фортепиано, неплохо поёт, а на скрипке идёт с трудом. Можно было бы сказать, что это оттого, что она не рождена скрипачкой, но очевиднее — что просто я не умею играть на скрипке, и по этому плохо с ней занимаюсь, а на фортепиано занимаюсь неплохо :)

И, таким образом предположив принципиальную возможность того, что феномен этой корейской девочки объясним системой обучения, мы можем хотя бы гипотетически задизайнить исследование, можем? Люди, которые хоть что-то пытались делать в педагогике скажут, что мы его никогда не задизайним: потому что у нас не хватит детей и жизни одного человека, чтобы проверить сколько бы то ни было статистически достоверно хотя бы с сотню гипотез о успешном формировании музыканта. Даже если себе поставить целью брать двухлеток и доводить до 6-ти. Тут есть ряд этических вопросов: вроде «вы собираетесь детеё использовать как лабораторных крыс?» — но, знаете, часто в наших музшколах ребят учат по педагогическим представлениям царя гороха, так что если найдутся энтузиасты, согласные начать хотя бы с условного дедушки Петрушина — детям в целом будет только польза.

Однако, новейшая история исследований уже знает несколько примеров НАСТОЛЬКО масштабных коопераций, когда на одну задачу были потрачены в эквиваленте несколько человеческих жизней: группа русских астрономов-любителей, например, недавно [организовала](https://habr.com/ru/post/175827/) поиск посадочного модуля аппарата Марс-3, и множество волонтёров, буквально, перекопали внушительную часть Марса, нашли аппарат. Или, в рамках проекта [«Galaxy Zoo»](http://zoo1.galaxyzoo.org/) тысячи людей промаркировали более 2 000 000 галактик.

То есть, в принципе, цель — найти оптимальный способ раннего развития музыканта исполнителя вдруг перестаёт быть софистикой и волей случая, а может быть совершенно реально задизайнено в большой социальный проект, в котором могли бы поучаствовать тысячи учитилей России и Мира, сделать огромный рывок в музыкальной педагогике! Честно, эта идея выглядит так вкусно, что я бы за неё схватился прямо сейчас, но я уже облюбовал в этом саду свой кустик, который и собираюсь окучивать ближайшие пару десятков лет.

Вообще рассказ о исследовательских и более прикладных проектах, которые стали возможны благодаря выросшей за последние 20 лет IT инфраструктуре — это рассказ об инструментах. Знаете, у нас в консерватории на третьем, кажется, курсе, был предмет «основы современной нотации», для которого был небольшой такой учебник (кстати, уже достаточно старый), в котором не содержалось почти ничего кроме обыкновенного перечисления способов записи музыкального текста или произведений. Кстати, часть примеров из этого сборника вы сможете услышать завтра на концерте фестиваля в лофт-парке Подземка. Когда я всё это читал — передо мной открывались целые невиданные музыкальные миры. В одном месте сразу пробуждалось шило, зудящее и требующее немедленного творческого акта. И я очень рекомендую освободить себе вечер-два и просто ознакомиться со списком инструментов, которые сейчас используются в других областях научного знания. Первым делом можно сходить на портал [люди науки](https://citizen-science.ru/) — это как раз портал о волонтёрских иследованиях, и там можно почитать и попросить помощи с организацией армии, которая будет заниматься вашей проблемой.

Кроме того, когда мы говорим про передовые возможности IT — мы говорим о BigData или больших данных. Нередко под BigData почему-то подразумевают нейронные сети, однако я лично избегаю нейросетей по двум причинам:
- **сложно и дорого**: что-то действительно интересное натренировать могут себе позволить только большие институты, яндекс, гугл, ещё пара компаний. [ссылка](https://www.technologyreview.com/2020/11/12/1011944/artificial-intelligence-replication-crisis-science-big-tech-google-deepmind-facebook-openai/) \([перевод](https://habr.com/ru/post/530994/)\)
- **ненадёжно**: в принципе, во многих областях науки сейчас говорят о кризисе воспроизводимости результатов, однако с нейросетями всё совсем грустно — есть [исследование](http://repeatability.cs.arizona.edu/) \([разбор на русском](https://habr.com/ru/post/480348/)\) аризонского университета, в котором исследователям удалось просто запустить только треть кодовой базы их статей. Это ещё не вдаваясь в подробности того — точно ли код делает то, что заявлено в статье.

Сам я не так давно хотел использовать достаточно разрекламированную библиотеку для [pitch-детекции](https://pypi.org/project/crepe/) нейросетью: она достаточно долго устанавливалась, достаточно долго работала и в итоге выдавала почти идентичный результат с алгоритмическим [решением](https://librosa.org/doc/latest/generated/librosa.pyin.html?highlight=pyin#librosa.pyin) из пакета librosa. Тем не менее, я не хочу сказать, что нейросети не работают. Они работают, но сказать, что задача лучше решается на нейронных сетях, чем другими способами — непросто и требует некоторых компетенций.

А вот простая и понятная статистика работает замечательно, как и последние 100 лет, а на больших данных статистика работает ещё лучше. Кроме того, в области музыкальной уже есть неплохая история алгоритмов для обработки цифровых сигналов (читайте, для работы с записанным аудио), распознаванием текста, в т.ч. нотного и, это достаточно молодая область — так называемый MIR — Music Information Retrival. MIR пытается алгоритмически описать то, что мы слышим, когда слушаем: начиная от свойств звука, заканчивая формой и стилем. Что-то сейчас умеют делать лучше, что-то хуже, но над этим работают и плодами этой работы можно пользоваться уже сейчас.

Подытоживая этот обзорный блок: музыканты ещё почти не заглядывали в область исследований с использованием больших данных, а там висят большие и вкусные проекты, которые могли бы стать украшением российского научного сообщества, при этом без вложений миллиардов денег и жизни исследователей. Для некоторых проектов надо придумать, как эти данные собрать — но это делать в целом уже научились, а в некоторых случаях большими данными могут стать уже оцифрованные данные: например аудио-записи. Вообще — по поводу миллиарда денег — IT-шников от остальных людей отличает привычка к автоматизации. Так что, возможно, если вы прямо сейчас посмотрите на то, что делаете — и спросите, можно ли это автоматизировать (или, последние годы ещё очень модно → распределить) — вам придёт неожиданно положительный ответ.

## на практике

Тем не менее, это всё было достаточно обощённо. Мне хотелось бы показать вам два примера подобных проектов и рассказать о том, чем сейчас занимаюсь я.

### ContendID

![ContentID](ContentID.png)

На прошлой неделе я выложил на YouTube концерт, который мы с женой пели в клубе «Синяя Цапля»: „Детский Альбом“ Чайковского и „Детская“ Мусоргского. И через 15-20 минут после загрузки видео было помечено, как нарушающее авторские права правообладателя этих произведений — некоего «AdShare (Publishing)» — безусловно, мошенников, потому что произведения находятся в общественном достоянии. И это, безусловно, ужасно.

Однако, ещё пару лет назад мне бы тоже прилетела жалоба на нарушение авторских прав, но предъявляли бы мне не то, что я играю Чайковского, а то, что в моём ролике звучит Чайковский записанный, скажем, Плетнёвым. За последний год я ещё ни разу не видел, чтобы ContentID — система, которая распознаёт музыку в видеоролике — ошиблась. И на мой взгляд — это феноменально. Посадите вы армию меломанов, которые отслушивали бы все видеоролики — они бы не справились с этой «чисто человеческой задачей» так хорошо, как с ней справляется ContentID!

Здесь целая прорва задач из разных областей, навскидку:

- сама база данных
- какие метаданные собирать
- сформулировать юридические и музыкальные критерии определния, что звучит именно это произведение, и в этом исполнении. В конце концов, сейчас, конечно, гугл прикидывается ветошью и говорит, типа, мы тут не при чём, все вопросы к правообладателю. Но не ровен час — это перестанет работать, и с гугла спросят по полной: на каких основаниях вы считаете, что то, что ваш робот пометил как Горовиц — на самом деле Горовиц?
- Оптимизировать это всё. Когда вам надо сопоставить потенциально бесконечное множество картинок с камеры с несколькими десятками объектов, которые вы можете встретить на дороге (это я про автопилот Теслы) — это задача одного порядка. Когда же по обе стороны поискового запроса потенциально бесконечное множество вариантов, и это ещё в своём особом формате, который не был проверен десятилетиями, как, например, текст — сделать такой индекс — это круто.

### Корпус русского языка

[сайт национального корпуса](https://ruscorpora.ru)

Задолго до появления ContentID, определившей наши отношения с авторским правом на ближайшее десятилетие и прихода нейросетей в мейнстрим, у нас в России был реализован невероятно масштабный кросс-дисциплинарный проект, на десятилетия определивший работу русских лингвистов.

В 2003 году стартовал проект «Национальный корпус русского языка». Туда влились несколько отдельных корпусов, собиравшихся с 90-х годов, а в настоящий момент это огромная база текстов на русском языке, начиная с XIII века заканчивая современностью. Большая часть там лежит в той или иной степени «сырой», часть в той или иной степени размечена: **в основном корпусе** есть морфологическая и метаразметка, в части основного корпуса вручную снята омонимия, и предназначен для тренировки разнообразного софта *(на всякий случай напомню: омонимы — это из стихотворения «норка вылезла из норки», а вот «девушка с косой косила косой» — это уже полисемия)*. Так называемый **СинТагРус** — это фрагмент корпуса, с синтаксической разметкой. Есть **мультимедийный корпус** (проще говоря, субтитры с оригинальным источником) И т.д. и т.п.

Если посмотреть на список участников — то только перечисление займёт весь доклад. Сотрудники больше десятка российских институтов и университетов, сотрудники институтов и университетов ближнего и дальнего зарубежья, представители Яндекса и ABBY. Что же там делали Яндекс с ABBY? А это мне больше всего нравится в этом проекте — то, что академическое сообщество и бизнес нашли точку, в которой происходит замечательное взаимовыгодное сотрудничество: насколько я понимаю, яндекс хостит корпус на своих серверах, а также организует поиск по корпусу. Поиск здесь ключевое слово — так как совершенствуя поиск по корпусу для проекта, Яндекс улучшает поиск по рунету. Стоит оно того или нет — каждый может решить для себя сам, создав сложный запрос на русском для яндекса и, допустим, для гугла.

Да, возникновение национального корпуса русского языка — закономерное развитие корпусной лингвистики. Но всё-таки то, что нечто подобное смогли сделать в 2003 году, и что проект живёт и развивается до сих пор — поражает и восхищает.

## Моя большая работа

Теперь двинемся в мою степь. Я собираюсь говорить о «виртуальных инструментах на основе сэмплирования». Звучит сложно, и часто встаёшь в тупик, пытаясь объяснить людям, что это такое и зачем нужно. Сегодня попробую описать то, чем мы занимаемся с помощью достаточно бородатого, но всё-таки достаточно точного анекдота:

### анекдот, две стороны задачи

Пианист заключает контракт с лейблом на запись всех рапсодий Листа. Приходит в назначенный час на студию, там продюсер, звукорежиссёр, ставят микрофоны настраивают звук. Продюсер говорит: ну ты пока поиграй, а мы пойдём чайку попьём. И пианист разыгрывается: гаммы, арпеджио, репетиции, всё в прямом, расходящемся и т.п. Устал, выглядывает в операторскую, навстречу продюсер:

— ну молодец, приятно было поработать!

— Так я ж только разыгрался?

— Ну и отлично! А дальше мы нарежем.

Ситуация абсурдная, но мы работаем над тем, чтобы она стала реальной. Если представить, что это не анекдот, а реальная история, то у нас возникнут два закономерных вопроса:

- что такого там наиграл пианист, что из этого можно было нарезать все рапсодии Листа?
- как так хитро там всё нарезали звукорежиссёр с продюсером, что им это оказалось легче, чем писать вживую?

Не могу сказать, что это очень молодая сфера деятельности. Можно брать разные точки отсчёта, но, пожалуй, ближе к концу 90-х сэмплы уже всерьёз пытались выполнять работу живых музыкантов.

### прогресс

Когда я стал плотно заниматься всей этой виртуальной кухней (где-то середина нулевых) — сэмплированный оркестр звучал примерно так [Корнелюк — МиМ 2005](Korneluk_Voland_2005.mp3)

Уже через пять лет человек-легенда Blakus завёл каналы на [soundcloud](https://soundcloud.com/blakus-mfm) и [YouTube](https://www.youtube.com/watch?v=vDQHqf2NYmU), вот его мокап на тему из Шарри Поттера \([клац](Blakus_Hedwigs_Theme_2011.mp3)\).

А вот современное состояние: тот же блакус образца 2020 года: \([клац](Blakus_Star_Wars_Main_Title_2020.mp4)\).

И, если кто-то успел подумать, что виртуальный оркестр пришёл к совершенству — давайте ещё посмотрим [фрагмент сравнения живого исполнения с мокапом](MockUp_VS_Live_Orchestra.mp4) *([оригинал](https://www.youtube.com/watch?v=Es0zvyAmB7w))*.

> остальные ссылки:
>- [Daniel Beijbom](https://youtu.be/dbsGYUbzG7Y) — уникум от виртуального исполнения.
>- [Сергей Первов](https://soundcloud.com/studioseyur) — самый амбициозный оркестровщик России, заявляет, что он круче всех. Так ли это — решать не ему, но играет, безусловно, хорошо.

### сфера применения

Для чего это всё нужно? Ну, во-первых, это интересно. Во-вторых, мы таким образом серьёзно расшияем инструментарий сразу в нескольких областях:

- Образование. Сложно переоценить, как ценно услышать свой оркестровый опус в более или менее приближенном исполнении, и как трудно донести свои сочинения до живого оркестра, даже будучи студентом ВУЗа.
- малобюджетные проекты, которым нужна оригинальная музыка. Во многом, конечно, именно эта область стала катализатором для развития.
- с другой стороны, высокобюджетные фильмы и музыкальные проекты не чураются сэмплов как дополнительных красок, средства для замазывания огрехов записи и уплотнения звука.
- и то, про что в контексте разговоров про сэмплирование часто опускается, но тем не менее, мне кажется крайне интересным и перспективным: сейчас при сэмплировании используют теорию исполнительства, наработанную к настоящему времени: в моём первом проекте настольной книжкой были таблицы Мальтера, сейчас бы я уже смотрел на что-нибудь вроде книги [«behind the bars»](http://www.behindbarsnotation.co.uk/) — полное руководство по нотации Элайны Гульд, так как она лучше отражает современный композиторский и исполнительский тезаурус. Однако мы подошли вплотную к краю теоретической исполнительской мысли — и дальше надо изобретать что-то ещё. Если говорить откровенно, мы пока не берёмся даже отличить деташе из «темы Монтеки и Капулетти» и деташе из «маленькой ночной серенады».

## история успеха

Конечно, если хочешь вдохновить кого-то на большую работу, хорошо бы иметь на руках историю успеха. И, к счастью, она у меня есть.

### студенческий проект и результат на текущий момент

6 лет тому назад, пришлось мне сделать вынужденную посадку в Сахаре... [муз пример](добрый_жук.mp3)

Не совсем: я задумал сделать виртуальный оркестр русских народных инструментов. По тем временам для России проект уникальный, так как у нас в стране разработчиков было по пальцам сосчитать, а с оркестрами не работал вообще никто. Сейчас, несмотря на большой срок, это до сих пор единственный вменяемый оркестр, сделанный (ну ещё не до конца) в России. Хотя некоторые ребята уже, как минимум, собирают большие составы и записываю с ними разные текстуры.

Вот так эти инструменты сейчас [звучат](добрый_жук_naked.mp3) без всех остальных: мы это называем «голые». 

### что удалось, чем пришлось пожертвовать

Первым камнем преткновения были деньги: сначала пятался влезть в какой-нибудь грант, потом чуть более успешно попробовал крауд, хотя boomstarter по окончании кампании оставил не очень приятные впечатления, а в итоге деньги на оркестр выделил папа моей бывшей ученицы — Андрей Кочев.

Бюджет у нас был, прямо скажем, тика-в-тику, даже по тем временам: ребятам я платил 500₽ в час, Юрий Иосифович Исаков тоже с нами был за номинальные деньги. Так что набор сэмплов получился максимально скромным: я держал ориеннтир на, достаточно старую даже по тем временам библиотеку струнных LASS. Старую, но тем не менее, уважаемую.

Так что по штрихам и исполнительским возможностям получилось сделать оркестр уровня «создать впечатление оркестрового звука», но без кучи исполнительских приёмов, вроде флажолет или щипков пальцами у домр. Тем не менее, всё, что мы записали, с точки зрения исполнения — записали крайне удачно. Всего получается 4 артикуляции на инструменнт (если не считать аккорды у группы балалаек), которые, за счёт сухого звука достаточно мобильны и замечтаельно обрабатываются в реальном времени.

В общем, я удивлён. Планы, конечно, были гораздо более Наполеоновские, но я удивлён, что фактически на студенческом энтузиазме удалось вывезти проект, который звучит и будет продолжать появляться в русских фонограммах. И очень надеюсь в этом году выпустить в релиз полную версию оркестра, для этого наконец есть все условия.

### побочные продукты производства

Вообще, когда делаешь что-то в одиночку без свободного времени и средств на негров — пытаешься заниматься оптимизацией везде где только можно.

Поскольку, надо мной не стоял ни научрук с зачёткой, ни инвестор с паяльником, я себе позволил потратить времени на «оптимизацию» *больше*, чем на сам проект. Неоднократно попытка немного облегчить себе жизнь выливалась в какой-то pet-проект. Так я написал компилятор, позволяющий писать на полноценном python так, чтобы в итоге получать скрипты на языке популярного сэмплера KONTAKT; внёс большой вклад и продолжаю контрибьютить в библиотеку reapy, радикально облегчающую написание скриптов для рабочей станции Reaper; было несколько разной степени удачливости попыток написания комбайна для нарезки сэмплов, последняя попытка была этой зимой под новый год, и я ей в целом очень доволен.

И всё это так или иначе наполняет мир открытого софта новыми инструментами, которые созданы так или иначе в рамках работы над «основным» проектом.

### рост индустрии за время жизни проекта

Напоследок хотел бы отметить насколько наша индустрия повзрослела за те шесть лет, что я занимаюсь этими народными. У нас появились новые чудесные инструменты стандартизации исполнительского интерфейса: мы их называем expression maps, не смотря на то, что это имя собственное, примерно такое же как Xerox. Наши сэмплеры обрасли новыми возможностями, в том числе получили развитие инструменты MIR — Music information retrieval. Появился, наконец, свободный полноценный сэмплер с уровнем входа не выше, чем KONTAKT! Так что я всех, кто как-то этим занимается агитирую переходить на HISE.

## заключение

Я очень надеюсь, что у кого-то из вас появились новые идеи относительно потенциальной коллаборации с IT-шниками. Ещё больше надеюсь, что кто-то вдохновился всей нашей оркестровой кухней, и впряжётся в нашу работу. Конечно, всегда есть желание что-то сделать первым, но на самом деле, не меньше радости испытываешь, когда большое сообщество работает над решением твоих повседневных рабочих проблем, и, более того, решает их. И очень я надеюсь, что в нашем мире всё больше будет открытой информации и свободного софта. И, конечно, хочется быть на острие прогресса, и я надеюсь, что и я сам ещё внесу свой вклад в развитие нашей индустрии. Спасибо за внимание.
